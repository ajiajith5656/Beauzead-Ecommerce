
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ğŸ“ HOW TO ADD STRIPE MUTATIONS TO APPSYNC SCHEMA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”— STEP 1: Open This URL
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
https://us-east-1.console.aws.amazon.com/appsync/home?region=us-east-1#/kodgcazqazgf5eiaxjzr6xravq/v1/schema


ğŸ“‹ STEP 2: Find the "Mutation" Type in the Schema Editor
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Scroll down in the schema editor until you see:

    type Mutation {
      banUser(id: ID!): User
      unbanUser(id: ID!): User
      deleteUser(id: ID!): Boolean
      
      createCategory(input: CategoryInput!): Category
      updateCategory(id: ID!, input: CategoryInput!): Category
      deleteCategory(id: ID!): Boolean
      addSubCategory(categoryId: ID!, subCategory: SubCategoryInput!): Category
      updateSubCategory(categoryId: ID!, subCategoryId: ID!, subCategory: SubCategoryInput!): Category
      removeSubCategory(categoryId: ID!, subCategoryId: ID!): Category
      
      createProduct(input: ProductInput!): Product
      updateProduct(id: ID!, input: ProductInput!): Product
      deleteProduct(id: ID!): Boolean
      approveProduct(id: ID!): Product
      rejectProduct(id: ID!): Product
      toggleProductStatus(id: ID!): Product
    }
                                                   ğŸ‘† HERE
                                          BEFORE THE CLOSING }


âœï¸ STEP 3: Add These 4 Lines BEFORE the closing }
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Copy and paste these 4 lines:

  createStripePaymentIntent(input: AWSJSON!): AWSJSON
  confirmPaymentAndCreateOrder(input: AWSJSON!): AWSJSON
  processRefund(input: AWSJSON!): AWSJSON
  processSellerPayout(input: AWSJSON!): AWSJSON


ğŸ“„ STEP 4: It Should Look Like This After Adding:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    type Mutation {
      banUser(id: ID!): User
      unbanUser(id: ID!): User
      deleteUser(id: ID!): Boolean
      
      createCategory(input: CategoryInput!): Category
      updateCategory(id: ID!, input: CategoryInput!): Category
      deleteCategory(id: ID!): Boolean
      addSubCategory(categoryId: ID!, subCategory: SubCategoryInput!): Category
      updateSubCategory(categoryId: ID!, subCategoryId: ID!, subCategory: SubCategoryInput!): Category
      removeSubCategory(categoryId: ID!, subCategoryId: ID!): Category
      
      createProduct(input: ProductInput!): Product
      updateProduct(id: ID!, input: ProductInput!): Product
      deleteProduct(id: ID!): Boolean
      approveProduct(id: ID!): Product
      rejectProduct(id: ID!): Product
      toggleProductStatus(id: ID!): Product
      
      createStripePaymentIntent(input: AWSJSON!): AWSJSON
      confirmPaymentAndCreateOrder(input: AWSJSON!): AWSJSON
      processRefund(input: AWSJSON!): AWSJSON
      processSellerPayout(input: AWSJSON!): AWSJSON
    }


ğŸ’¾ STEP 5: Click "Save Schema" Button (Top Right)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Click the orange "Save Schema" button at the top right corner


ğŸ”— STEP 6: Attach Resolvers
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
After saving, click on each mutation name in the sidebar:

1. Click "createStripePaymentIntent"
   â†’ Click "Attach" under "Data source name"
   â†’ Select "PaymentIntentDataSource"
   â†’ Click "Save Resolver"

2. Click "confirmPaymentAndCreateOrder"
   â†’ Click "Attach"
   â†’ Select "ConfirmPaymentDataSource"
   â†’ Click "Save Resolver"

3. Click "processRefund"
   â†’ Click "Attach"
   â†’ Select "RefundDataSource"
   â†’ Click "Save Resolver"

4. Click "processSellerPayout"
   â†’ Click "Attach"
   â†’ Select "PayoutDataSource"
   â†’ Click "Save Resolver"


âœ… DONE! Your payment system is now fully connected!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Test it by:
1. Going to your app: /checkout/shipping
2. Add items to cart and proceed through checkout
3. Use test card: 4242 4242 4242 4242
4. Any expiry date in the future
5. Any 3-digit CVC


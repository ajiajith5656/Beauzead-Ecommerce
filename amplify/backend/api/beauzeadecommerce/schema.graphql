# This project uses Cognito User Pools (default) + IAM (additional auth).
# Public access should use IAM provider, not API key.

# GraphQL Schema for Beauzead Ecommerce
# Public read access is enabled for browsing products and categories
# Admin operations require authentication via Cognito User Pools

type CountryListBzdcore @model {
  id: ID!
  countryName: String!
  shortCode: String!
  currency: String!
  dialCode: String
}

type BusinessTypeBzdcore @model {
  id: ID!
  typeName: String!
  description: String
}

# Category Management
type Category @model {
  id: ID!
  name: String!
  description: String
  imageUrl: String
  isActive: Boolean! @default(value: "true")
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime!
}

# SubCategory Management
type SubCategory @model {
  id: ID!
  categoryId: String! # Reference to Category
  name: String!
  description: String
  imageUrl: String
  isActive: Boolean! @default(value: "true")
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime!
}

# SubCategory Management
type SubCategory @model {
  id: ID!
  categoryId: String! # Reference to parent category
  name: String!
  description: String
  imageUrl: String
  isActive: Boolean! @default(value: "true")
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime!
}

# Product Images
type ProductImage @model {
  id: ID!
  productId: String! # Reference to Product
  imageUrl: String! # S3 URL
  thumbnailUrl: String # For faster loading
  displayOrder: Int! # 1, 2, 3, etc
  isMainImage: Boolean! @default(value: "false")
  uploadedBy: String! # sellerId or adminId
  description: String
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime!
}

# Product Management
type Product @model {
  id: ID!
  name: String!
  description: String!
  price: Float!
  currency: String!
  imageUrl: String
  mainImageUrl: String # Direct reference for quick access
  sellerId: String!
  categoryId: String!
  stock: Int!
  approved: Boolean! @default(value: "false")
  createdAt: AWSDateTime!
  approvalStatus: String @default(value: "pending") # pending, approved, rejected
  isActive: Boolean! @default(value: "true")
  updatedAt: AWSDateTime!
}

# Order Management
type Order @model {
  id: ID!
  userId: String!
  total: Float!
  currency: String!
  status: String! @default(value: "new") # new, processing, shipped, delivered, cancelled, return_requested, returned
  createdAt: AWSDateTime!
  address: String
  phone: String
  paymentStatus: String @default(value: "pending") # pending, completed, failed
  updatedAt: AWSDateTime!
}

# Review Management
type Review @model {
  id: ID!
  productId: String!
  userId: String!
  rating: Int!
  comment: String!
  createdAt: AWSDateTime!
  isVerified: Boolean
  isFlagged: Boolean @default(value: "false")
}

# Complaint Management
type Complaint @model {
  id: ID!
  userId: String!
  subject: String!
  description: String!
  status: String! @default(value: "open") # open, in_progress, resolved, closed
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime!
  assignedTo: String
  resolution: String
}

# KYC Requirements by Country & Registration Type
type KYCRequirement @model {
  id: ID!
  country: String! # India, USA, UK, Germany, France, Italy, Spain, Canada, Australia, Singapore, UAE, Saudi Arabia, Japan, China, Brazil, South Africa
  registrationType: String! # Individual, Sole Proprietorship, Partnership, LLC, Corporation, etc.
  requiredDocuments: String! # Comma-separated: PAN, GST, EIN, UTR, etc.
  description: String
  isActive: Boolean! @default(value: "true")
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime!
}

# Seller KYC Submission & Status
type SellerKYCSubmission @model {
  id: ID!
  sellerId: String!
  country: String!
  registrationType: String!
  submittedDocuments: [String] # URLs to uploaded documents
  status: String! @default(value: "pending") # pending, approved, rejected
  submissionDate: AWSDateTime!
  reviewedBy: String # Admin ID who reviewed
  reviewDate: AWSDateTime
  rejectionReason: String
  updatedAt: AWSDateTime!
}

# Dashboard Metrics
type DashboardMetrics @model {
  id: ID!
  totalSales: Float!
  totalExpenses: Float!
  totalProducts: Int!
  totalUsers: Int!
  totalSellers: Int!
  totalBookings: Int!
  ongoingOrders: Int!
  returnsCancellations: Int!
  userRegistrations: Int!
  primeMembers: Int!
  sellerRegistrations: Int!
  createdAt: AWSDateTime!
  updatedAt: AWSDateTime!
}
